---
description: 변경된 파일에 대해 코딩 표준 검사를 실행합니다
---

# /enforce_standards

## 목표

변경된 모든 Python 파일에 대해 `.claude/coding_conventions.md`의 코딩 표준 준수 여부를 검사하고 위반 사항을 보고합니다.

## 실행 단계

### 1단계: 변경 파일 식별

```bash
# 스테이지된 파일과 수정된 파일 목록
git diff --name-only --diff-filter=ACMR HEAD
git diff --name-only --diff-filter=ACMR --cached
```

Python 파일만 필터링합니다 (`.py` 확장자).

### 2단계: 표준 로드

`.claude/coding_conventions.md`의 현재 코딩 규칙을 검토합니다.

### 3단계: 각 파일 검사

변경된 각 Python 파일에 대해:

1. **임포트 규칙**: 최상위 임포트 사용 여부, typing 모듈 대신 내장 타입 사용 여부
2. **타입 어노테이션**: 모든 함수/메서드에 타입 힌트 존재 여부
3. **예외 처리**: 예외를 제어 흐름으로 사용하지 않는지, 딕셔너리 접근 시 `in` 사용 여부
4. **컨텍스트 매니저**: 올바른 `with` 구문 사용 여부
5. **Dagster 패턴**: 에셋에 독스트링, 메타데이터, 환경 헬퍼 사용 여부

### 4단계: 보고서 생성

위반 사항을 심각도별로 분류하여 보고합니다:
- **치명적**: 즉시 수정 필요
- **중요**: 가능한 빨리 수정
- **경미**: 다음 기회에 수정

### 5단계: 자동 수정

사용자 승인 후, 자동으로 수정 가능한 위반 사항을 수정합니다.

```bash
# 포맷팅 및 린팅 자동 수정
just ruff

# 타입 체크
just pyright
```

## 주의사항

- `__pycache__` 폴더나 `.pyc` 파일은 검색하지 않습니다.
- 변경된 파일만 검사합니다 (전체 코드베이스가 아님).
- 수정 제안은 기존 코드 패턴을 따릅니다.
