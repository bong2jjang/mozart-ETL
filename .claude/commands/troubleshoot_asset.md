---
description: Dagster 에셋 실행 문제를 진단합니다
argument-hint: <에셋-키-또는-이름>
---

# /troubleshoot_asset

## 목표

Dagster 에셋의 실행 실패나 이상 동작을 체계적으로 진단합니다.

## 사용법

```
/troubleshoot_asset purina.oss_analytics.dagster_pypi_downloads
/troubleshoot_asset my_asset_name
```

## 실행 단계

### 1단계: 에셋 코드 찾기

```bash
# 에셋 정의 파일 검색
# defs/ 디렉토리에서 에셋 이름으로 검색
```

에셋 정의, 리소스 의존성, 파티셔닝 설정을 파악합니다.

### 2단계: 의존성 분석

- 업스트림 에셋 확인
- 리소스 의존성 확인 (Snowflake, Fivetran 등)
- 환경 변수 요구사항 확인

### 3단계: 설정 검증

- **파티셔닝**: 올바른 파티션 정의 확인
- **자동화 조건**: `AutomationCondition` 설정 검증
- **체크 스펙**: 에셋 체크 정의 확인
- **환경 헬퍼**: `get_database_for_environment()` 등 올바른 사용 확인

### 4단계: 일반적인 문제 체크리스트

| 문제 유형 | 확인 사항 |
|-----------|-----------|
| 임포트 에러 | 모든 의존성이 pyproject.toml에 있는지 |
| 타입 에러 | pyright 타입 체크 통과 여부 |
| 리소스 에러 | 환경 변수 설정 여부 |
| 파티션 에러 | 파티션 범위 및 시작 날짜 |
| Snowflake 에러 | 데이터베이스/스키마/테이블 존재 여부 |
| 컴포넌트 에러 | YAML 구문 및 등록 상태 |

### 5단계: 진단 결과 보고

```md
## 진단 결과: [에셋 이름]

### 에셋 정보
- 파일: [파일 경로]
- 그룹: [그룹 이름]
- 파티셔닝: [파티션 유형]

### 발견된 문제
1. [문제 1: 설명 및 위치]
2. [문제 2: ...]

### 해결 방안
1. [해결 1: 구체적 수정 방법]
2. [해결 2: ...]

### 검증 방법
- [검증 명령어 또는 절차]
```

## 주의사항

- 에셋 코드뿐만 아니라 관련 컴포넌트, 리소스, 유틸리티도 함께 확인합니다.
- 환경별 차이(PROD, DEV)를 고려합니다.
- 가능하면 로컬에서 재현 가능한 검증 방법을 제시합니다.
